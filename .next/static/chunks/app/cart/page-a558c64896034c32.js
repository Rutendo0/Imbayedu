(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{2538:(e,t,r)=>{"use strict";r.d(t,{e:()=>o,_:()=>d});var a=r(5155),s=r(2115);async function i(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function n(e,t,r){let a=await fetch(t,{method:e,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await i(a),a}new(r(432)).E({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:r}=e,a=await fetch(r[0],{credentials:"include"});return"returnNull"===t&&401===a.status?null:(await i(a),await a.json())}})({on401:"throw"}),staleTime:3e5,refetchOnWindowFocus:!1,retry:1,refetchInterval:!1},mutations:{retry:!1}}});var l=r(5691);let c=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),{toast:u}=(0,l.dj)();(0,s.useEffect)(()=>{(async()=>{try{d(!0);let e=await fetch("".concat("","/api/cart/").concat(1,"/details"),{credentials:"include"});if(e.ok){let t=await e.json();i(t)}}catch(e){console.error("Error fetching cart items:",e),u({title:"Error",description:"Failed to load your cart items. Please try again.",variant:"destructive"})}finally{d(!1)}})()},["",u,1]);let m=async e=>{try{d(!0);let t=await n("POST","".concat("","/api/cart"),e);await t.json();let r=await fetch("".concat("","/api/cart/").concat(1,"/details"),{credentials:"include"});if(r.ok){let e=await r.json();i(e)}}catch(e){console.error("Error adding item to cart:",e),u({title:"Error",description:"Failed to add item to your cart. Please try again.",variant:"destructive"})}finally{d(!1)}},x=async e=>{try{d(!0),await n("DELETE","".concat("","/api/cart/").concat(e)),i(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing item from cart:",e),u({title:"Error",description:"Failed to remove item from your cart. Please try again.",variant:"destructive"})}finally{d(!1)}},h=async(e,t)=>{try{d(!0),await n("PATCH","".concat("","/api/cart/").concat(e),{quantity:t}),i(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))}catch(e){console.error("Error updating cart item quantity:",e),u({title:"Error",description:"Failed to update item quantity. Please try again.",variant:"destructive"})}finally{d(!1)}},p=async()=>{try{d(!0),await n("DELETE","".concat("","/api/cart?userId=").concat(1)),i([])}catch(e){console.error("Error clearing cart:",e),u({title:"Error",description:"Failed to clear your cart. Please try again.",variant:"destructive"})}finally{d(!1)}};return(0,a.jsx)(c.Provider,{value:{cartItems:r,cartItemsWithDetails:r,addItem:m,removeItem:x,updateItemQuantity:h,clearCart:p,isLoading:o},children:t})},d=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,vv:()=>n});var a=r(2596),s=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function n(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5289:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var a=r(5155),s=r(2115),i=r(6874),n=r.n(i),l=r(2538),c=r(7712),o=r(4616),d=r(9946);let u=(0,d.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var m=r(7168),x=r(3999);function h(e){let{item:t}=e,{updateItemQuantity:r,removeItem:s}=(0,l._)(),{artwork:i,quantity:n}=t;return(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center py-6 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"w-full sm:w-24 h-24 mb-4 sm:mb-0 mr-0 sm:mr-6 flex-shrink-0",children:(0,a.jsx)("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-1",children:i.title}),(0,a.jsxs)("p",{className:"text-neutral-600 text-sm mb-2",children:["By ",i.artist?i.artist.name:0===i.price?"Gift to Community":"Unknown Artist"]}),(0,a.jsx)("p",{className:"text-[#D3A265] font-semibold",children:(0,x.vv)(i.price)})]}),(0,a.jsxs)("div",{className:"flex items-center mt-4 sm:mt-0",children:[(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-sm",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"icon",onClick:()=>{n>1?r(t.id,n-1):s(t.id)},className:"h-8 w-8 rounded-none",children:(0,a.jsx)(c.A,{size:16})}),(0,a.jsx)("span",{className:"w-10 text-center",children:n}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",onClick:()=>{r(t.id,n+1)},className:"h-8 w-8 rounded-none",children:(0,a.jsx)(o.A,{size:16})})]}),(0,a.jsx)(m.$,{variant:"ghost",size:"icon",onClick:()=>{s(t.id)},className:"ml-4 text-red-500 hover:text-red-700 hover:bg-transparent",children:(0,a.jsx)(u,{size:18})})]})]})}let p=(0,d.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),f=()=>{let{cartItemsWithDetails:e,clearCart:t}=(0,l._)(),r=(0,s.useMemo)(()=>e.reduce((e,t)=>e+t.artwork.price*t.quantity,0),[e]),i=150*(r>0);return 0===e.length?(0,a.jsxs)("div",{className:"pt-24 md:pt-32",children:[(0,a.jsx)("div",{className:"bg-neutral-100 py-12",children:(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-['Playfair_Display'] font-bold text-neutral-900 text-center",children:"Your Cart"})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,a.jsxs)("div",{className:"max-w-xl mx-auto text-center",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)(p,{size:80,className:"text-neutral-300"})}),(0,a.jsx)("h2",{className:"text-2xl font-['Playfair_Display'] font-semibold text-neutral-900 mb-4",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-8",children:"Looks like you haven't added any artworks to your cart yet. Continue browsing to discover our unique collection."}),(0,a.jsx)(n(),{href:"/artworks",children:(0,a.jsx)(m.$,{className:"bg-[#D3A265] hover:bg-opacity-90 text-white font-medium px-8 py-3",children:"Browse Artworks"})})]})})]}):(0,a.jsxs)("div",{className:"pt-24 md:pt-32",children:[(0,a.jsx)("div",{className:"bg-neutral-100 py-12",children:(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-['Playfair_Display'] font-bold text-neutral-900 text-center",children:"Your Cart"})})}),(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-gray-200 mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-['Playfair_Display'] font-semibold",children:["Shopping Cart (",e.length," items)"]}),(0,a.jsx)(m.$,{variant:"ghost",className:"text-neutral-500 hover:text-red-500 p-0",onClick:t,children:"Clear Cart"})]}),(0,a.jsx)("div",{children:e.map(e=>(0,a.jsx)(h,{item:e},e.id))}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(n(),{href:"/artworks",children:(0,a.jsx)(m.$,{variant:"outline",className:"text-neutral-700",children:"Continue Shopping"})})})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-neutral-50 p-6 rounded-md",children:[(0,a.jsx)("h3",{className:"text-lg font-['Playfair_Display'] font-semibold mb-6 pb-4 border-b border-gray-200",children:"Order Summary"}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Subtotal"}),(0,a.jsx)("span",{className:"font-medium",children:(0,x.vv)(r)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Shipping"}),(0,a.jsx)("span",{className:"font-medium",children:(0,x.vv)(i)})]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200 mb-6",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total"}),(0,a.jsx)("span",{className:"text-xl font-semibold",children:(0,x.vv)(r+i)})]}),(0,a.jsx)(n(),{href:"/checkout",children:(0,a.jsx)(m.$,{className:"w-full bg-[#D3A265] hover:bg-opacity-90 text-white font-medium py-3",children:"Proceed to Checkout"})}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-neutral-500",children:(0,a.jsx)("p",{children:"Secure checkout. All transactions are encrypted."})})]})})]})})]})}},5585:(e,t,r)=>{Promise.resolve().then(r.bind(r,5289))},5691:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var a=r(2115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],c={toasts:[]};function o(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function d(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:r});return o({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(5155),s=r(2115),i=r(9708),n=r(2085),l=r(3999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:o=!1,...d}=e,u=o?i.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:s,size:n,className:r})),ref:t,...d})});o.displayName="Button"},7712:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])}},e=>{e.O(0,[6874,4201,9853,8229,8441,5964,7358],()=>e(e.s=5585)),_N_E=e.O()}]);